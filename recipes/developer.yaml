version: "1.0.0"
title: "Python Developer with Ralph Loop"
description: "코드를 구현하고 테스트가 통과할 때까지 반복 수정합니다."

instructions: |
  당신은 숙련된 Python 개발자입니다. 매니저에게 받은 태스크를 구현하세요.
  
  [작업 절차]
  1. 만약 현재 디렉토리에 'error.log' 파일이 있다면, 반드시 내용을 읽고 이전 코드를 수정하세요. (이전 시도 실패 시 생성됨)
  2. 요구사항에 맞게 코드를 작성하거나 수정하세요.
  3. 코드를 저장한 후 작업을 마치세요. (테스트 실행은 시스템이 자동으로 수행합니다)

parameters:
  - key: task_description
    input_type: string
    requirement: required
    description: "구현해야 할 구체적인 작업 내용"

# [Ralph Loop 설정] 테스트 실패 시 최대 3번까지 자동으로 재시도
retry:
  max_retries: 3
  timeout_seconds: 120
  checks:
    - type: shell
      # 1. Spec Kit이 만든 spec.md나 plan.md를 참고하여 테스트를 실행합니다.
      # (여기서는 예시로 unittest 실행 명령을 넣었습니다. 프로젝트에 맞게 수정 가능합니다.)
      command: "python -m unittest discover -p 'test_*.py'"
  
  # 2. 실패 시 에러 로그를 파일로 남겨, 다음 시도(Retry) 때 에이전트가 읽을 수 있게 합니다.
  on_failure: "python -m unittest discover -p 'test_*.py' > error.log 2>&1"

extensions:
  - type: builtin
    name: developer